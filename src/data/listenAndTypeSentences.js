// ==============================================
// LISTEN AND TYPE SENTENCE DATA
// Organised by CEFR levels with audio file mapping
// ==============================================

export const SENTENCE_POOLS = {
  A2: [
    {
      id: 'a2_01',
      correctText: "I like to eat pizza on Fridays",
      difficulty: "A2 - Simple present tense with basic vocabulary",
      audioFile: "audio/listen-and-type/A2-01.mp3",
      topics: ["food", "time", "preferences"],
      grammarFocus: "simple present"
    },
    {
      id: 'a2_02',
      correctText: "She's going to the supermarket tomorrow",
      difficulty: "A2 - Future with 'going to' and contractions",
      audioFile: "audio/listen-and-type/A2-02.mp3",
      topics: ["shopping", "future plans"],
      grammarFocus: "going to future"
    },
    {
      id: 'a2_03',
      correctText: "My brother works in a big office",
      difficulty: "A2 - Simple present with family and work vocabulary",
      audioFile: "audio/listen-and-type/A2-03.mp3",
      topics: ["family", "work"],
      grammarFocus: "simple present"
    },
    {
      id: 'a2_04',
      correctText: "We can't find our keys anywhere",
      difficulty: "A2 - Modal verbs with contractions",
      audioFile: "audio/listen-and-type/A2-04.mp3",
      topics: ["problems", "everyday objects"],
      grammarFocus: "modal verbs"
    },
    {
      id: 'a2_05',
      correctText: "The children are playing in the garden",
      difficulty: "A2 - Present continuous with basic vocabulary",
      audioFile: "audio/listen-and-type/A2-05.mp3",
      topics: ["family", "activities", "places"],
      grammarFocus: "present continuous"
    },
    {
      id: 'a2_06',
      correctText: "I don't like coffee but I love tea",
      difficulty: "A2 - Preferences with conjunctions",
      audioFile: "audio/listen-and-type/A2-06.mp3",
      topics: ["preferences", "drinks"],
      grammarFocus: "likes and dislikes"
    },
    {
      id: 'a2_07',
      correctText: "There's a new restaurant near my house",
      difficulty: "A2 - There is/are with location vocabulary",
      audioFile: "audio/listen-and-type/A2-07.mp3",
      topics: ["places", "location"],
      grammarFocus: "there is/are"
    },
    {
      id: 'a2_08',
      correctText: "He usually gets up at seven o'clock",
      difficulty: "A2 - Adverbs of frequency with time",
      audioFile: "audio/listen-and-type/A2-08.mp3",
      topics: ["daily routine", "time"],
      grammarFocus: "adverbs of frequency"
    },
    {
      id: 'a2_09',
      correctText: "We're planning to visit Paris next month",
      difficulty: "A2 - Future plans with 'going to'",
      audioFile: "audio/listen-and-type/A2-09.mp3",
      topics: ["travel", "future plans"],
      grammarFocus: "future plans"
    },
    {
      id: 'a2_10',
      correctText: "The weather was terrible last weekend",
      difficulty: "A2 - Past simple with weather vocabulary",
      audioFile: "audio/listen-and-type/A2-10.mp3",
      topics: ["weather", "time"],
      grammarFocus: "past simple"
    }
  ],
  
  B1: [
    {
      id: 'b1_01',
      correctText: "I've been working here for three years",
      difficulty: "B1 - Present perfect with time expressions",
      audioFile: "audio/listen-and-type/B1-01.mp3",
      topics: ["work", "time expressions"],
      grammarFocus: "present perfect"
    },
    {
      id: 'b1_02',
      correctText: "If it doesn't rain tomorrow we'll have a picnic",
      difficulty: "B1 - First conditional with contractions",
      audioFile: "audio/listen-and-type/B1-02.mp3",
      topics: ["weather", "plans", "conditions"],
      grammarFocus: "first conditional"
    },
    {
      id: 'b1_03',
      correctText: "The meeting was cancelled because the manager wasn't available",
      difficulty: "B1 - Past tense with reason clauses",
      audioFile: "audio/listen-and-type/B1-03.mp3",
      topics: ["work", "meetings", "reasons"],
      grammarFocus: "past simple + because"
    },
    {
      id: 'b1_04',
      correctText: "I used to live in Manchester when I was younger",
      difficulty: "B1 - Used to with past experiences",
      audioFile: "audio/listen-and-type/B1-04.mp3",
      topics: ["past experiences", "places"],
      grammarFocus: "used to"
    },
    {
      id: 'b1_05',
      correctText: "She's been studying English since she moved here",
      difficulty: "B1 - Present perfect continuous with time clauses",
      audioFile: "audio/listen-and-type/B1-05.mp3",
      topics: ["learning", "time expressions"],
      grammarFocus: "present perfect continuous"
    },
    {
      id: 'b1_06',
      correctText: "The film we watched last night was really boring",
      difficulty: "B1 - Relative clauses with past tense",
      audioFile: "audio/listen-and-type/B1-06.mp3",
      topics: ["entertainment", "opinions"],
      grammarFocus: "relative clauses"
    },
    {
      id: 'b1_07',
      correctText: "I'd rather stay at home than go to the party",
      difficulty: "B1 - Preferences with 'would rather'",
      audioFile: "audio/listen-and-type/B1-07.mp3",
      topics: ["preferences", "social activities"],
      grammarFocus: "would rather"
    },
    {
      id: 'b1_08',
      correctText: "By the time we arrived the concert had already started",
      difficulty: "B1 - Past perfect with time expressions",
      audioFile: "audio/listen-and-type/B1-08.mp3",
      topics: ["events", "time sequences"],
      grammarFocus: "past perfect"
    },
    {
      id: 'b1_09',
      correctText: "The doctor advised me to take more exercise",
      difficulty: "B1 - Reported speech with advice",
      audioFile: "audio/listen-and-type/B1-09.mp3",
      topics: ["health", "advice"],
      grammarFocus: "reported speech"
    },
    {
      id: 'b1_10',
      correctText: "Although it was raining we decided to go for a walk",
      difficulty: "B1 - Concessive clauses with 'although'",
      audioFile: "audio/listen-and-type/B1-10.mp3",
      topics: ["weather", "decisions"],
      grammarFocus: "although clauses"
    }
  ],
  
  B2: [
    {
      id: 'b2_01',
      correctText: "Despite having studied for weeks he couldn't pass the examination",
      difficulty: "B2 - Complex sentence with 'despite' and past perfect",
      audioFile: "audio/listen-and-type/B2-01.mp3",
      topics: ["education", "results"],
      grammarFocus: "despite + gerund"
    },
    {
      id: 'b2_02',
      correctText: "The research suggests that people who exercise regularly live longer",
      difficulty: "B2 - Relative clauses with academic vocabulary",
      audioFile: "audio/listen-and-type/B2-02.mp3",
      topics: ["health", "research"],
      grammarFocus: "complex relative clauses"
    },
    {
      id: 'b2_03',
      correctText: "I wish I'd taken that job offer instead of staying here",
      difficulty: "B2 - Third conditional with regret",
      audioFile: "audio/listen-and-type/B2-03.mp3",
      topics: ["regret", "career decisions"],
      grammarFocus: "wish + past perfect"
    },
    {
      id: 'b2_04',
      correctText: "Had I known about the traffic I would have left earlier",
      difficulty: "B2 - Inverted conditional structures",
      audioFile: "audio/listen-and-type/B2-04.mp3",
      topics: ["transport", "regret"],
      grammarFocus: "inverted conditionals"
    },
    {
      id: 'b2_05',
      correctText: "The company is trying to reduce the damage it causes to nature",
      difficulty: "B2 - Business vocabulary with relative pronouns",
      audioFile: "audio/listen-and-type/B2-05.mp3",
      topics: ["environment", "business"],
      grammarFocus: "complex sentence structure"
    },
    {
      id: 'b2_06',
      correctText: "Not only did she finish early but she also did better than expected",
      difficulty: "B2 - Inverted structures with 'not only'",
      audioFile: "audio/listen-and-type/B2-06.mp3",
      topics: ["achievement", "results"],
      grammarFocus: "not only... but also"
    },
    {
      id: 'b2_07',
      correctText: "The study has been done in many different schools and colleges",
      difficulty: "B2 - Present perfect passive with simple vocabulary",
      audioFile: "audio/listen-and-type/B2-07.mp3",
      topics: ["education", "research"],
      grammarFocus: "present perfect passive"
    },
    {
      id: 'b2_08',
      correctText: "No sooner had we entered the room than the phone started ringing",
      difficulty: "B2 - Inverted structures with 'no sooner'",
      audioFile: "audio/listen-and-type/B2-08.mp3",
      topics: ["sequences", "timing"],
      grammarFocus: "no sooner... than"
    },
    {
      id: 'b2_09',
      correctText: "The idea was turned down because it didn't have enough details",
      difficulty: "B2 - Passive voice with phrasal verbs",
      audioFile: "audio/listen-and-type/B2-09.mp3",
      topics: ["decisions", "reasons"],
      grammarFocus: "passive with phrasal verbs"
    },
    {
      id: 'b2_10',
      correctText: "If it weren't for the help of friends the project couldn't work",
      difficulty: "B2 - Hypothetical conditionals with simple vocabulary",
      audioFile: "audio/listen-and-type/B2-10.mp3",
      topics: ["friendship", "support"],
      grammarFocus: "if it weren't for"
    }
  ],
  
  C1: [
    {
      id: 'c1_01',
      correctText: "The government's refusal to make big changes has been criticised a lot",
      difficulty: "C1 - Complex possessive structures with passive voice",
      audioFile: "audio/listen-and-type/C1-01.mp3",
      topics: ["politics", "criticism"],
      grammarFocus: "complex possessive + passive"
    },
    {
      id: 'c1_02',
      correctText: "Despite what the committee said the idea was rejected by everyone",
      difficulty: "C1 - Complex clause structures with simple vocabulary",
      audioFile: "audio/listen-and-type/C1-02.mp3",
      topics: ["meetings", "decisions"],
      grammarFocus: "despite what + clause"
    },
    {
      id: 'c1_03',
      correctText: "The problem shows itself in many different ways that seem unconnected",
      difficulty: "C1 - Complex sentence structure with relative clauses",
      audioFile: "audio/listen-and-type/C1-03.mp3",
      topics: ["problems", "analysis"],
      grammarFocus: "complex relative clauses"
    },
    {
      id: 'c1_04',
      correctText: "So big was the disaster that help from other countries came straight away",
      difficulty: "C1 - Inverted structures for emphasis",
      audioFile: "audio/listen-and-type/C1-04.mp3",
      topics: ["disasters", "international aid"],
      grammarFocus: "so + adjective inversion"
    },
    {
      id: 'c1_05',
      correctText: "What these results mean goes far beyond what this one study looked at",
      difficulty: "C1 - Complex clause structures with embedded questions",
      audioFile: "audio/listen-and-type/C1-05.mp3",
      topics: ["research", "implications"],
      grammarFocus: "what-clauses"
    },
    {
      id: 'c1_06',
      correctText: "Strangely the most successful business people often see failure as necessary",
      difficulty: "C1 - Complex ideas with simple vocabulary",
      audioFile: "audio/listen-and-type/C1-06.mp3",
      topics: ["business", "success", "failure"],
      grammarFocus: "complex ideas"
    },
    {
      id: 'c1_07',
      correctText: "The growth of digital technology has completely changed how we think about talking to people",
      difficulty: "C1 - Complex embedded clauses with simple words",
      audioFile: "audio/listen-and-type/C1-07.mp3",
      topics: ["technology", "communication"],
      grammarFocus: "how we + verb clauses"
    },
    {
      id: 'c1_08',
      correctText: "Although it caused arguments the method used in the research gave new understanding",
      difficulty: "C1 - Complex concessive clauses",
      audioFile: "audio/listen-and-type/C1-08.mp3",
      topics: ["research", "methodology"],
      grammarFocus: "although + complex clause"
    },
    {
      id: 'c1_09',
      correctText: "The effects of climate change touch almost every part of modern life",
      difficulty: "C1 - Complex ideas expressed simply",
      audioFile: "audio/listen-and-type/C1-09.mp3",
      topics: ["environment", "impact"],
      grammarFocus: "abstract concepts"
    },
    {
      id: 'c1_10',
      correctText: "Whatever someone's political views the evidence shown cannot be argued with",
      difficulty: "C1 - Complex concessive structures with simple vocabulary",
      audioFile: "audio/listen-and-type/C1-10.mp3",
      topics: ["politics", "evidence"],
      grammarFocus: "whatever + clause"
    }
  ]
};

// Test structure configuration
export const TEST_STRUCTURE = [
  { level: 'A2', count: 2 },
  { level: 'B1', count: 3 },
  { level: 'B2', count: 3 },
  { level: 'C1', count: 2 }
];

// Helper functions for data management
export const getSentenceById = (id) => {
  for (const level in SENTENCE_POOLS) {
    const sentence = SENTENCE_POOLS[level].find(s => s.id === id);
    if (sentence) return sentence;
  }
  return null;
};

export const getSentencesByLevel = (level) => {
  return SENTENCE_POOLS[level] || [];
};

export const getSentencesByTopic = (topic) => {
  const results = [];
  for (const level in SENTENCE_POOLS) {
    const sentences = SENTENCE_POOLS[level].filter(s => 
      s.topics.includes(topic)
    );
    results.push(...sentences);
  }
  return results;
};

export const getSentencesByGrammar = (grammarFocus) => {
  const results = [];
  for (const level in SENTENCE_POOLS) {
    const sentences = SENTENCE_POOLS[level].filter(s => 
      s.grammarFocus === grammarFocus
    );
    results.push(...sentences);
  }
  return results;
};

export const getAllSentences = () => {
  const allSentences = [];
  for (const level in SENTENCE_POOLS) {
    allSentences.push(...SENTENCE_POOLS[level]);
  }
  return allSentences;
};

// Validation functions for audio files
export const getAudioFileList = () => {
  return getAllSentences().map(s => s.audioFile);
};

export const getMissingAudioFiles = (existingFiles) => {
  const requiredFiles = getAudioFileList();
  return requiredFiles.filter(file => !existingFiles.includes(file));
};

// Statistics
export const getDataStats = () => {
  const stats = {
    totalSentences: 0,
    sentencesByLevel: {},
    uniqueTopics: new Set(),
    uniqueGrammarPoints: new Set()
  };
  
  for (const level in SENTENCE_POOLS) {
    const sentences = SENTENCE_POOLS[level];
    stats.totalSentences += sentences.length;
    stats.sentencesByLevel[level] = sentences.length;
    
    sentences.forEach(sentence => {
      sentence.topics.forEach(topic => stats.uniqueTopics.add(topic));
      stats.uniqueGrammarPoints.add(sentence.grammarFocus);
    });
  }
  
  stats.uniqueTopics = Array.from(stats.uniqueTopics);
  stats.uniqueGrammarPoints = Array.from(stats.uniqueGrammarPoints);
  
  return stats;
};
